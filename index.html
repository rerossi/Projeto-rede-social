<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <!-- JavaScript Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>
    <link rel="stylesheet" href="./style/style.css">
    <title>Oi Sumido</title>
    <style>
        .hidden {
            display: none;
        }

        .show {
            display: block;
        }

        #imgConverted{
            display: none;
            
        }
    </style>
</head>

<body>

    <header>
        <nav class="navbar navbar-light row">
            <div class="logo col">
                <img src="assets/logo.png" width="150px" alt="Logo Oi Sumido">

                <div class="coracao ">
                    <div class="quadrado"></div>
                    <div class="circulo-1"></div>
                    <div class="circulo-2"></div>
                </div>


            </div>

            <div class="container justify-content-end col me-2">
                <h5 id="logado"></h5>
                <button class="btnLogout" onclick="logout()">sair</button>
            </div>
        </nav>
    </header>

    <main class="main">
        <div class="newPost mb-4 mt-4 px-4 py-5">
            <div class="infoUser">
                <div class="imgUser my-2"></div>
                <strong id="postName" class="mx-2"></strong>


            </div>

            <form action="" class="formPost" id="formPost">
                <textarea name="textarea" placeholder="Seja Bem vindo" id="textarea" maxlength="2000"></textarea>

                <div class="iconsAndButton">
                    <div class="icons">

                        <img src="assets/img.png" alt="Selecione uma imagem" title="imagem" id="imgPhoto"
                            style="width:30px;">

                        <input type="file" id="flImage" name="fImage" accept="image/*">

                        <img src="assets/audio.png" title="Audio" alt="adicionar um audio" id="myAudio"
                            style="width:30px;">

                        <input type="file" id="flAudio" name="fAudio" accept="audio/*">

                        <img src="assets/video.png" alt="Selecione um video" title="video" id="myVideo"
                            style="width:30px;">

                        <input type="file" id="flVideo" name="fVideo" accept="video/*" style="width:30px;">

                        <img src="assets/desenhar.png" alt="Faça um desenho" title="desenho" id="myDraw"
                            style="width:30px;" onclick="mostraDraw()">

                        <input type="button" id="FlDraw" name="fDraw" style="width:30px;">

                    </div>

                    <button class="btnSubmitForm rounded px-2  mx-2" id="botao" type="submit"
                        onclick="getLocation()">Publicar</button>

                </div>
            </form>
        </div>


        <ul class="posts" id="posts">

        </ul>

        <img id="uploadImage" src="" alt="">
        <video id="uploadVideo" src=""></video>
        <audio id="uploadAudio" src=""></audio>
        <div id="abc" class="hidden">
            <div id="toolbar">
                <h1>Faça o seu Desenho</h1>
                <button id="clear">Clear</button>
                <button id="save">Save</button>

                <div class="drawing-board">
                   
                    <canvas id="drawing-board" width="500" height="500" style=" background-color: azure; margin-top: 10px; margin-bottom: 250px; border: 5px solid lightskyblue;" ></canvas>
            
                </div>
            </div>


        </div>

       

        







    </main>
    <script src="./Controllers/login.js"></script>
    <script src="./Controllers/FormPost.js"></script>
    <script src="./Controllers/logout.js"></script>

    <script>

const gCanvas = document.querySelector('#drawing-board');
const toolbar = document.getElementById('toolbar');
const gCtx = gCanvas.getContext('2d');

    

        toolbar.addEventListener('click', e => {
            if (e.target.id === 'clear') {
                gCtx.clearRect(0, 0, gCanvas.width, gCanvas.height);
            }
        });


        function onMouseDown(e) {
  e.preventDefault();  
  window.addEventListener('mousemove', onMouseMove);
  window.addEventListener('mouseup', onMouseUp);
}

function onMouseMove(e) {
  e.preventDefault();
  gCtx.fillRect(e.offsetX - 4, e.offsetY - 4, 8, 8);
}

function onMouseUp(e) {
  e.preventDefault();
  window.removeEventListener('mousemove', onMouseMove);
  window.removeEventListener('mouseup', onMouseUp);

}



function onSave() {
  gCanvas.toBlob((blob) => {
    const timestamp = Date.now().toString();
    const a = document.createElement('a');
    document.body.append(a);
    a.download = `export-${timestamp}.png`;
    a.href = URL.createObjectURL(blob);
    a.click();
    a.remove();
  });
}


gCanvas.addEventListener('mousedown', onMouseDown);
document.querySelector('#save').addEventListener('click', onSave);
    </script>

    <script>
        function mostraDraw() {
            document.getElementById('abc').style.display = 'block';
        }

    </script>

    <script>
      
    </script>


</body>

</html>