<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <!-- JavaScript Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="./style/style.css">
    <title>Oi Sumido</title>
    <style>
        .hidden {
            display: none;
        }
        
        .show {
            display: block;
        }
    </style>
</head>

<body>

    <header>
        <nav class="navbar navbar-light row">
            <div class="logo col">
                <img src="assets/logo.png" width="150px" alt="Logo Oi Sumido">

                <div class="coracao ">
                    <div class="quadrado"></div>
                    <div class="circulo-1"></div>
                    <div class="circulo-2"></div>
                </div>


            </div>

            <div class="container justify-content-end col me-2">
                <h5 id="logado"></h5>
                <button class="btnLogout" onclick="logout()">sair</button>
            </div>
        </nav>
    </header>

    <main class="main">
        <div class="newPost mb-4 mt-4 px-4 py-5">
            <div class="infoUser">
                <div class="imgUser my-2"></div>
                <strong id="postName" class="mx-2"></strong>


            </div>

            <form action="" class="formPost" id="formPost">
                <textarea name="textarea" placeholder="Seja Bem vindo" id="textarea" maxlength="2000"></textarea>

                <div class="iconsAndButton">
                    <div class="icons">

                        <img src="assets/img.png" alt="Selecione uma imagem" title="imagem" id="imgPhoto" style="width:30px;">

                        <input type="file" id="flImage" name="fImage" accept="image/*">

                        <img src="assets/audio.png" title="Audio" alt="adicionar um audio" id="myAudio" style="width:30px;">

                        <input type="file" id="flAudio" name="fAudio" accept="audio/*">

                        <img src="assets/video.png" alt="Selecione um video" title="video" id="myVideo" style="width:30px;">

                        <input type="file" id="flVideo" name="fVideo" accept="video/*" style="width:30px;">

                        <img src="assets/desenhar.png" alt="FaÃ§a um desenho" title="desenho" id="myDraw" style="width:30px;" onclick="mostraDraw()">

                        <input type="button" id="FlDraw" name="fDraw" style="width:30px;">

                    </div>

                    <button class="btnSubmitForm rounded px-2  mx-2" id="botao" type="submit" onclick="getLocation()">Publicar</button>

                </div>
            </form>
        </div>


        <ul class="posts" id="posts">

        </ul>

        <img id="uploadImage" src="" alt="">
        <video id="uploadVideo" src=""></video>
        <audio id="uploadAudio" src=""></audio>
        <div id="abc" class="hidden">
            <div id="toolbar">
                <h1>Draw.</h1>
                <label for="stroke">Stroke</label>
                <input id="stroke" name='stroke' type="color">
                <label for="lineWidth">Line Width</label>
                <input id="lineWidth" name='lineWidth' type="number" value="5">
                <button id="clear">Clear</button>


                <div class="drawing-board">
                    <canvas class="border border-4" id="drawing-board" style="width: 500px; height: 400px;"></canvas>
                </div>
            </div>










    </main>
    <script src=" ./Controllers/login.js "></script>
    <script src="./Controllers/FormPost.js "></script>
    <script src="./Controllers/logout.js "></script>

    <script>
        const canvas = document.getElementById('drawing-board');
        const toolbar = document.getElementById('toolbar');
        const ctx = canvas.getContext('2d');

        const canvasOffsetX = canvas.offsetLeft;
        const canvasOffsetY = canvas.offsetTop;

        canvas.width = window.innerWidth - canvasOffsetX;
        canvas.height = window.innerHeight - canvasOffsetY;

        let isPainting = false;
        let lineWidth = 5;
        let startX;
        let startY;

        toolbar.addEventListener('click', e => {
            if (e.target.id === 'clear') {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
            }
        });

        toolbar.addEventListener('change', e => {
            if (e.target.id === 'stroke') {
                ctx.strokeStyle = e.target.value;
            }

            if (e.target.id === 'lineWidth') {
                lineWidth = e.target.value;
            }

        });

        const draw = (e) => {
            if (!isPainting) {
                return;
            }

            ctx.lineWidth = lineWidth;
            ctx.lineCap = 'round';

            ctx.lineTo(e.clientX - canvasOffsetX, e.clientY);
            ctx.stroke();
        }

        canvas.addEventListener('mousedown', (e) => {
            isPainting = true;
            startX = e.clientX;
            startY = e.clientY;
        });

        canvas.addEventListener('mouseup', e => {
            isPainting = false;
            ctx.stroke();
            ctx.beginPath();
        });

        canvas.addEventListener('mousemove', draw);
    </script>

    <script>
        function mostraDraw() {
            document.getElementById('abc').style.display = 'block';
        }
    </script>


</body>

</html>